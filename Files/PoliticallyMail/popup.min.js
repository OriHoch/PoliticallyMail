(function(){var that=this;this.ThankYouTimeout=null;this.justOpened=true;this.HandleKarma=function(Karma){chrome.browserAction.setIcon({path:"img/icon19"+(Karma?"":"_off")+".png"},function(){});document.getElementById("active").src="img/"+(Karma?"On":"Off")+".png";if(!that.justOpened)chrome.tabs.getSelected(null,function(tab){chrome.tabs.reload(tab.id)})};this.activate=function(){that.justOpened=false;this.src=this.src.indexOf("Off")>-1?this.src.replace(/Off/,"On"):this.src.replace(/On/,"Off");chrome.extension.sendRequest({"SetPoliticallyMail":true,
"PoliticallyMail":this.src.indexOf("On")>-1},function(response){that.HandleKarma(response["PoliticallyMail"])})};this.run=function(){chrome.extension.sendRequest({"GetPoliticallyMail":true},function(response){that.HandleKarma(response["PoliticallyMail"]);document.getElementById("active").addEventListener("click",that.activate,false)})};document.addEventListener("DOMContentLoaded",that.run,false)})();
